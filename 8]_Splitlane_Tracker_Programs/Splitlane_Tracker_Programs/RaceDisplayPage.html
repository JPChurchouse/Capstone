<!DOCTYPE html>
<html>

<head>
  <style>
    body {
      color: white;
      background-color: #000000;
      /* Use a hex color code */
    }

    h1 {
      font-family: Arial, sans-serif;
      /* Change the font family */
      text-align: center;
      /* Change the alignment */
    }

    table {
      border-collapse: collapse;
      text-align: center;
      margin: 0 auto;
      width: 90%;
    }

    th,
    td {
      border: 2px solid red;
      padding: 8px;
      font-size: xx-large;
      font-family: Arial, sans-serif;
    }
  </style>

  <title>Websocket Client</title>

  <img src="Images/Logo_XKarts_Main.png" alt="Description of the image" height="200"
    style="display: block; margin: 0 auto;">

</head>

<body>
  <h1>Splitlane Tracking System</h1>
  <div id="output"></div>
  <div id="table-container"></div>

  <script>



    const outputDiv = document.getElementById("output");
    const socket = new WebSocket("ws://localhost:8080");

    socket.onopen = function (event) {
      console.log("WebSocket connection established.");
    };

    socket.onmessage = function (event) {
      const receivedData = event.data;
      console.log("Received WebSocket message: " + receivedData);

      // Update the page with received data
      const messageDiv = document.createElement("div");
      messageDiv.textContent = receivedData;
      outputDiv.appendChild(messageDiv);
    };

    socket.onclose = function (event) {
      console.log("WebSocket connection closed.");
    };

    function updateDispList(jsonString) {
      const jsonArray = JSON.parse(jsonString);

      // Iterate over the array of objects
      jsonArray.forEach(obj => {
        console.log(obj.name);
        console.log(obj.age);
      });



    }

    const jsonArray = [
      { name: 'John', age: 30, city: 'New York' },
      { name: 'Jane', age: 25, city: 'London' },
      { name: 'Bob', age: 40, city: 'Paris' }
    ];

    const tableContainer = document.getElementById('table-container');
    const table = document.createElement('table');
    const headerRow = document.createElement('tr');

    // Create table headers
    Object.keys(jsonArray[0]).forEach(key => {
      const th = document.createElement('th');
      th.textContent = key;
      headerRow.appendChild(th);
    });

    table.appendChild(headerRow);

    // Create table rows and cells
    jsonArray.forEach(obj => {
      const row = document.createElement('tr');

      Object.values(obj).forEach(value => {
        const cell = document.createElement('td');
        cell.textContent = value;
        row.appendChild(cell);
      });

      table.appendChild(row);
    });

    tableContainer.appendChild(table);

    
  </script>
</body>

</html>